fs# golang-united-school-homework-8

В задаче нужно написать консольное приложение для управления списком пользователей. Он должен принимать следующие типы операций:
`добавить
список
найти по идентификатору
удалить`
Список пользователей должен храниться в файле json. Когда вы запускаете свое приложение и пытаетесь выполнить некоторые операции, следует использовать существующий файл или создать новый, если он не существует.
Пример файла json (users.json):
`[{id: "1", электронная почта: «test@test.com», возраст: 31}, {id: "2", электронная почта: «test2@test.com», возраст: 41}]`
В файле `main.go` вы можете найти ошибку функции Perform(args Arguments, Writer io.Writer).
Вы должны вызвать эту функцию из основной функции и передать аргументы из консоли и потока os.Stdout. Тело выполнения функции вы должны написать сами :).
Аргументы - это `map[string]string` со следующими полями:
`идентификатор, элемент, операция и имя файла`. Создайте отдельный тип для карты аргументов: `type Arguments map[string]string`, чтобы предотвратить дублирование `map[string]string`. Модульные тесты также используют тип Arguments.
Аргументы должны передаваться через консольные флаги:
`./main.go -операция «добавить» -item ‘{«id»: «1», «email»: «email@test.com», «возраст»: 23}’ -fileName «users.json»`
`-operation`, `-item` и `-fileName` являются флагами консоли. Чтобы разобрать их и построить карту, вы можете взглянуть на пакет «flag»: https://golang.org/pkg/flag/.
Обратите внимание, что флаг `-fileName` должен указываться каждый раз вместе с именем файла, в котором вы храните пользователей!

#### Получение списка элементов:
Приложение должно получить список из файла users.json и распечатать его в поток io.Writer. Используйте средство записи из аргумента функции Perform для печати результата! Это важно для прохождения модульных тестов. Это может быть что-то вроде `writer.Write(bytes)`
Содержимое файла: `[{«id»: «1», «email»: «email@test.com», «age»: 23}]`
Команда: `./main -operation «list» -fileName «users.json»` (main — встроенное приложение для запуска. Двоичный файл после команды go build)
Вывод в консоль: `[{«id»: «1», «email»: «email@test.com», «age»: 23}]`
Если файл пуст, то в консоль ничего не должно выводиться.
**Ошибки:**
1. Если флаг `-операция` отсутствует, то из функции Perform должна быть возвращена ошибка `-флаг операции`. Пакет `errors` можно использовать для создания ошибок (https://golang.org/pkg/errors/).
2. Если флаг `—fileName` отсутствует, то из функции Perform должна быть возвращена ошибка «-fileName flag».
3. Если операция не может быть обработана, например операция «abc», то «Операция abc не разрешена!» ошибка должна быть возвращена из функции выполнения
   Все случаи покрываются модульными тестами. Если вы хотите убедиться, что ваше решение работает правильно, просто запустите команду go test -v в корне репозитория.
#### Добавление нового элемента:
Для добавления нового элемента в массив внутри файла users.json приложение должно предоставить следующую команду cmd:
`./main -операция «добавить» -item «{«id»: «1», «email»: «email@test.com», «возраст»: 23}» -fileName «users.json»`
`-item` - действительный объект json с полями id, email и age
**Ошибки:**
1. Все ошибки, связанные с операцией и флагами fileName, упомянутыми выше
2. Если флаг `-item` не указан, функция выполнения должна возвращать ошибку «необходимо указать флаг -item»

#### Удалить пользователя
Приложение должно разрешать удаление пользователя с помощью следующей команды:
`./main -операция «удалить» -id «2» -fileName «users.json»`
Если пользователя с id `"2"`, например, не существует, функции Perform должны вывести на io.Writer сообщение «Item with id 2 not found».
Если пользователь с указанным идентификатором существует, его следует удалить из файла users.json.
**Ошибки:**
1. Все ошибки, связанные с операцией и флагами fileName, упомянутыми выше
2. Если флаг `-id` не указан, из функции Perform должна быть возвращена ошибка «необходимо указать флаг -id».

#### Найти по id
Приложение должно позволять найти пользователя по id с помощью следующей команды:
`./main -операция «findById» -id «1» -fileName «users.json»`
Если пользователь с указанным идентификатором не существует в файле users.json, то в io.Writer необходимо записать пустую строку.
Если пользователь существует, то объект json должен быть записан в `io.Writer`
**Ошибки:**
1. Все ошибки, связанные с операцией и флагами fileName, упомянутыми выше
2. Если флаг `-id` не указан, из функции Perform должна быть возвращена ошибка «необходимо указать флаг -id».
   Все случаи задачи покрыты модульными тестами, так что вы можете проверить свое решение в процессе реализации.

### Полезная информация:
1. Для открытия и создания файла используйте пакет `os` и функцию `OpenFile` https://golang.org/pkg/os/
2. Чтобы просто прочитать файл, используйте пакет ioutil и функцию ReadAll https://golang.org/pkg/io/ioutil/.
3. Чтобы преобразовать строку json в объект, используйте пакет `encoding/json` и функцию `Unmarshal`: https://golang.org/pkg/encoding/json/
4. Чтобы преобразовать массив или объект json в строку, используйте пакет json и функцию `Marshal`.
5. В Go нет оператора throw и оператора try catch. Вместо этого он имеет множественный возврат и позволяет возвращать ошибку из функции: `func () (Пользователь, ошибка) {}`
   Взгляните: https://medium.com/@hussachai/error-h